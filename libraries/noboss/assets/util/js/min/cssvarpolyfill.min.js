var cssVarPoly={init:function(){window.CSS&&window.CSS.supports&&window.CSS.supports("(--foo: red)")||(document.querySelector("body").classList.add("cssvars-polyfilled"),cssVarPoly.ratifiedVars={},cssVarPoly.varsByBlock={},cssVarPoly.oldCSS={},cssVarPoly.findCSS(),cssVarPoly.updateCSS())},findCSS:function(){var e=document.querySelectorAll('style:not(.inserted),link[rel="stylesheet"],link[rel="import"]'),t=1;[].forEach.call(e,function(e){var s;"STYLE"===e.nodeName?(s=e.innerHTML,cssVarPoly.findSetters(s,t)):"LINK"===e.nodeName&&(cssVarPoly.getLink(e.getAttribute("href"),t,function(e,s){cssVarPoly.findSetters(s.responseText,e),cssVarPoly.oldCSS[e]=s.responseText,cssVarPoly.updateCSS()}),s=""),cssVarPoly.oldCSS[t]=s,t++})},findSetters:function(e,s){e=e.match(/:root\s*?\{(\s*?.*?\s*?)*\}/g)||[],cssVarPoly.varsByBlock[s]=e.join("").match(/(--.+:.+;)/g)||[]},updateCSS:function(){for(var e in cssVarPoly.ratifySetters(cssVarPoly.varsByBlock),cssVarPoly.oldCSS){var s,t=cssVarPoly.replaceGetters(cssVarPoly.oldCSS[e],cssVarPoly.ratifiedVars);document.querySelector("#inserted"+e)?document.querySelector("#inserted"+e).innerHTML=t:((s=document.createElement("style")).type="text/css",s.innerHTML=t,s.classList.add("inserted"),s.id="inserted"+e,document.getElementsByTagName("head")[0].appendChild(s))}},replaceGetters:function(s,e){for(var t in e){var r=new RegExp("var\\(\\s*"+t+"\\s*\\)","g"),o=s.match(r),r=(s=s.replace(r,e[t]),new RegExp("var\\(\\s*.+\\s*,\\s*(.+)\\)","g"));(o=s.match(r))&&o.forEach(function(e){s=s.replace(e,e.match(/var\(.+,\s*(.+)\)/)[1])})}return s},ratifySetters:function(e){for(var s in e)e[s].forEach(function(e){e=e.split(/:\s*/);cssVarPoly.ratifiedVars[e[0]]=e[1].replace(/;/,"")})},getLink:function(e,s,t){var r=new XMLHttpRequest;r.open("GET",e,!0),r.overrideMimeType("text/css;"),r.onload=function(){200<=r.status&&r.status<400&&"function"==typeof t&&t(s,r)},r.onerror=function(){},r.send()}};document.addEventListener("DOMContentLoaded",function(e){cssVarPoly.init()});