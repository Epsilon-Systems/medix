jQuery(document).ready(function(jQuery){$=jQuery;var queue=[].map(function(script){return"js"===script.slice(-2)&&0===jQuery("script[src*='"+script.slice(-30)+"']").length?jQuery("head").append('<script type="text/javascript" src="'+script+'"><\/script>'):"css"===script.slice(-3)&&0===jQuery("link[href*='"+script.slice(-30)+"']").length?jQuery("head").append('<link rel="stylesheet" href="'+script+'"/>'):void 0});jQuery.when.apply(null,queue).done(function(){testimonialsItem.CONSTRUCTOR()})});var testimonialsItem={};function validateTypeTestimonials(){var testimonialType=jQuery("[name='jform[display_type]']").val(),testimonialText=jQuery("[name='jform[text_testimonial]']"),testimonialVideo=jQuery("[name='jform[video_id]']");"text"===testimonialType?(testimonialText.addClass("required"),testimonialText.attr("required","required"),testimonialVideo.removeClass("required"),testimonialVideo.removeAttr("required")):(testimonialVideo.addClass("required"),testimonialVideo.attr("required","required"),testimonialText.removeClass("required"),testimonialText.removeAttr("required"))}function deletePhoto(element){element.addClass("hidden");var photo=jQuery("img[name='photo-edit']");photo.addClass("hidden"),photo.attr("src",""),jQuery("input[name='path_new_image_resized']").val(""),jQuery("#jform_photo").val("")}function validatePhotoUploaded(inputFile){inputFile.siblings("div.alert-danger").remove();var isValid=!1;return!0===validateFileExtension(inputFile)&&(isValid=validateFileSize(inputFile)),isValid}function validateFileExtension(inputFile){var inputName=jQuery(inputFile).attr("name");jQuery(inputFile).siblings("div[data-field='error_file_extension_"+inputName+"']").remove();var validFileExtensions=(validFileExtensions=inputFile.attr("accept")).replace(/ /g,"").split(","),fileName=inputFile.val(),dotFileName=(fileName=fileName.split("\\").pop()).lastIndexOf("."),fileExtension=fileName.substring(dotFileName).toLowerCase(),isExtensionValid=!1;if(0<fileName.length)for(var index=0;index<validFileExtensions.length;index++){if(fileExtension==validFileExtensions[index].toLowerCase()){isExtensionValid=!0;break}}return!1===isExtensionValid&&(inputFile.val(""),0===jQuery("div[data-field='error_file_extension_"+inputName+"']").length&&jQuery("<div data-field='error_file_extension_"+inputName+"' class='alert alert-danger'>"+translationConstants.constErrorFileExtension+"</div>").insertAfter(inputFile)),isExtensionValid}function validateFileSize(inputFile){var inputName=jQuery(inputFile).attr("name");return jQuery(inputFile).removeClass("invalid"),jQuery(inputFile).siblings("div[data-field='error_"+inputName+"']").remove(),jQuery(inputFile).siblings("div[data-field='error_file_size_"+inputName+"']").remove(),!(inputFile[0].files[0].size>translationConstants.constMaxFileSize)||(jQuery(inputFile).addClass("invalid"),0===jQuery("div[data-field='[error_file_size_"+inputName+"']").length&&jQuery("<div data-field='error_file_size_"+inputName+"' class='alert alert-danger'>"+translationConstants.constMaxFileSizeError+"</div>").insertAfter(inputFile),inputFile.val(""),!1)}function displayFieldByTestimonialsGroup(idTestimonialsGroup){var url=baseNameUrl+"administrator/index.php?option=com_nobosstestimonials&task=testimonial.getDisplayFieldsByTestimonialsGroupAjax",data={idTestimonialsGroup:idTestimonialsGroup};0==jQuery("div.loader--fullpage").length&&(jQuery("body").append('<div class="loader loader--fullpage"></div>'),jQuery("body").append('<div class="loader-fade"></div>')),jQuery.ajax({type:"POST",url:url,data:data}).done(function(fieldsDisplayByTestimonialGroup){testimonialsItem.fieldsDisplayByTestimonialGroup=jQuery.parseJSON(fieldsDisplayByTestimonialGroup),0==testimonialsItem.fieldsDisplayByTestimonialGroup.display_type&&0==testimonialsItem.fieldsDisplayByTestimonialGroup.text_testimonial&&jQuery("[name='jform[display_type]']").val("video"),0!=testimonialsItem.fieldsDisplayByTestimonialGroup.display_type||0!=testimonialsItem.fieldsDisplayByTestimonialGroup.video&&null!=testimonialsItem.fieldsDisplayByTestimonialGroup.video||jQuery("[name='jform[display_type]']").val("text"),jQuery("[name='jform[display_type]']").trigger("change"),testimonialsItem.ignoredFields=["author_name"],displayFields(jQuery.extend(!0,{},testimonialsItem.fieldsDisplayByTestimonialGroup),testimonialsItem.ignoredFields),jQuery("body").find(".loader.loader--fullpage").remove(),jQuery("body").find(".loader-fade").remove()})}function displayFields(permissionsFieldsDisplay,ignoredFields){var formTestimonial=jQuery("[name='form-testimonial']");jQuery.each(permissionsFieldsDisplay,function(fieldName,canDisplay){var jQueryGetField="select[name*='"+fieldName+"'],:input[name*='"+fieldName+"'],:text[name*='"+fieldName+"'],:radio[name*='"+fieldName+"'],:checkbox[name*='"+fieldName+"'],:submit[name*='"+fieldName+"'],:reset[name*='"+fieldName+"'],:button[name*='"+fieldName+"'],:file[name*='"+fieldName+"'],:image[name*='"+fieldName+"']",field=formTestimonial.find(jQueryGetField),divParentControl=field.closest(".controls"),divParentControlGroup=field.closest(".control-group"),label=divParentControlGroup.find(".control-label label");if(!0===canDisplay||-1!==jQuery.inArray(fieldName,ignoredFields))"display_type"==fieldName&&("text"==jQuery("[name=jform\\[display_type\\]]").val()?permissionsFieldsDisplay.video_id=!1:permissionsFieldsDisplay.text_testimonial=!1),0<divParentControl.length&&(label.removeClass("hidden"),divParentControlGroup.css("display","block"),divParentControlGroup.removeClass("hidden"),field.is("select")||field.removeClass("hidden"));else{if("display_type"===fieldName&&!0===permissionsFieldsDisplay.video_id&&(permissionsFieldsDisplay.photo=!1),-1!==jQuery.inArray(fieldName,ignoredFields))return;0<divParentControl.length&&(label.addClass("hidden"),divParentControlGroup.css("display","none"),field.is("select")||field.addClass("hidden"))}})}function filterFieldsTestimonialsByGroup(){var selectTestimonialsGroup=jQuery("select[name*='id_testimonials_group']");""===selectTestimonialsGroup.val()?hiddenAllFields():displayFieldByTestimonialsGroup(selectTestimonialsGroup.val())}function hiddenAllFields(){jQuery("#content .hidden-group").each(function(){"true"!==jQuery(this).attr("data-ignore-to-hidden")&&jQuery(this).closest(".control-group").addClass("hidden").css("display","none")})}testimonialsItem.CONSTRUCTOR=function(){var formTestimonial=jQuery("[name='form-testimonial']");filterFieldsTestimonialsByGroup();var toolBar=jQuery("#toolbar").find("button");formTestimonial.on("change","select[name*='id_testimonials_group']",function(e){filterFieldsTestimonialsByGroup()}),formTestimonial.on("change","[name='jform[display_type]']",function(){validateTypeTestimonials(),displayFields(jQuery.extend(!0,{},testimonialsItem.fieldsDisplayByTestimonialGroup),testimonialsItem.ignoredFields)}),formTestimonial.on("change","[data-id='upload-binary']",function(e){toolBar.attr("disabled","disabled")}),formTestimonial.on("binnaryFileRequisitionEnds",function(e){toolBar.removeAttr("disabled")})};