"function"==typeof define&&define.amd?define([],function(){return{start:nobossTestimonialsSubmission.CONSTRUCTOR}}):jQuery(document).ready(function(jQuery){$=jQuery,nobossTestimonialsSubmission.CONSTRUCTOR()});var nobossTestimonialsSubmission={CONSTRUCTOR:function(){var formsTestimonialSubmission=jQuery("[data-id^='testimonial-submission-']"),sendFormButtons=jQuery("[data-id^='send-testimonial']");nobossTestimonialsSubmission.checkAuthorizeTestimonial(sendFormButtons),nobossTestimonialsSubmission.handleTestimonialType(jQuery("[name^='display_type']")),formsTestimonialSubmission.on("change","[name^='display_type']",function(e){var testimonialDisplayType=jQuery(this);nobossTestimonialsSubmission.handleTestimonialType(testimonialDisplayType)}),formsTestimonialSubmission.on("change","input[id^='authorize-testimonial']",function(e){var confirmAuthorize=jQuery(this),form=confirmAuthorize.closest("[data-id^=form-data-testimonial-submission]");confirmAuthorize.is(":checked")?form.find("[data-id^='send-testimonial-']").attr("disabled",!1):form.find("[data-id^='send-testimonial-']").attr("disabled",!0)}),formsTestimonialSubmission.on("change","[data-id='upload-binary']",function(e){jQuery(this).closest("[data-id^='form-data-testimonial-submission']").find("[data-id^='send-testimonial-']").attr("disabled",!0)}),formsTestimonialSubmission.on("binnaryFileRequisitionEnds",function(e){var buttonFormSend=jQuery(this).find("[data-id^='send-testimonial']");nobossTestimonialsSubmission.checkAuthorizeTestimonial(buttonFormSend)}),formsTestimonialSubmission.on("submit","form[data-id^='form-data-testimonial-submission']",function(vEvent){vEvent.preventDefault();var formTestimonialSubmission=jQuery(this);console.log(formTestimonialSubmission);var request,contextForm=formTestimonialSubmission.closest("[data-id^='testimonial-submission-form-']");nobossTestimonialsSubmission.validateTestimonial(contextForm)&&(contextForm.find("[data-id^='return-testimonial-']").remove(),request={option:"com_ajax",module:"nobosstestimonialsubmission",dataTestimonialSubmission:[formTestimonialSubmission.serialize()],method:"receiveTestimonial",format:"raw"},jQuery.ajax({beforeSend:function(){formTestimonialSubmission.css({opacity:.7,"pointer-events":"none"})},type:"POST",data:request,success:function(returnReceiveTestimonial){var messageReturn=jQuery(returnReceiveTestimonial);setTimeout(function(){formTestimonialSubmission.find("[data-id^='send-testimonial-']").attr("disabled",!0),formTestimonialSubmission.css({opacity:"","pointer-events":""}),messageReturn.insertBefore(formTestimonialSubmission.find(".testimonial-form-footer")),"return-testimonial-success-message"===messageReturn.attr("data-id")&&(formTestimonialSubmission.trigger("reset"),formTestimonialSubmission.find("[data-id='deleteFile']").trigger("click"),"0"!=caracterLimitation&&contextForm.find("[data-id='counter-characters']").html(caracterLimitation))},800)}}))})},validateTestimonial:function(contextForm){var testimonialDisplayType=contextForm.find("[name^='display_type']"),testimonialText=contextForm.find("[name='text_testimonial']"),testimonialVideo=contextForm.find("[name='video_id']"),authorName=contextForm.find("[name='author_name']");if(nobossTestimonialsSubmission.isEmptyField(authorName.val()))return jQuery(htmlErrorMessageMandatoryField).insertBefore(authorName),!1;if("text"===testimonialDisplayType.val()){var counterElementWrapper=$(".nobosstextcounter-wrapper"),textAreaLimit=($(counterElementWrapper).find(".nobosstextcounter"),$(counterElementWrapper).data("limit"));if(nobossTestimonialsSubmission.isEmptyField(testimonialText.val()))return jQuery(htmlErrorMessageMandatoryField).insertBefore(testimonialText),!1;if(testimonialText.val().length>textAreaLimit)return jQuery(htmlErrorMessageInvalidField).insertBefore(testimonialText),!1}else if(nobossTestimonialsSubmission.isEmptyField(testimonialVideo.val()))return jQuery(htmlErrorMessageMandatoryField).insertBefore(testimonialVideo),!1;return!0},handleTestimonialType:function(testimonialDisplayType){jQuery.each(testimonialDisplayType,function(){var testimonialDisplayType=jQuery(this),contextForm=testimonialDisplayType.closest("[data-id^='testimonial-submission-form-']"),testimonialText=contextForm.find("[name='text_testimonial']"),testimonialVideo=contextForm.find("[name='video_id']");"text"===testimonialDisplayType.val()?(testimonialText.attr("required","required"),testimonialVideo.removeAttr("required"),contextForm.find(".nobossbinaryfile").show()):(testimonialVideo.attr("required","required"),testimonialText.removeAttr("required"),contextForm.find(".nobossbinaryfile").hide())})},isEmptyField:function(value){return""===value},checkAuthorizeTestimonial:function(sendFormButtons){jQuery.each(sendFormButtons,function(){var buttonSendForm=jQuery(this),confirmAuthorize=buttonSendForm.closest("[data-id^='form-data-testimonial-submission']").find("input[id^='authorize-testimonial']");0<confirmAuthorize.length&&!confirmAuthorize.is(":checked")?buttonSendForm.attr("disabled","disabled"):buttonSendForm.removeAttr("disabled","disabled")})}};