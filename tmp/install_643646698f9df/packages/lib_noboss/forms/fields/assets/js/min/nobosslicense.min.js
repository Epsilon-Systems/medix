jQuery(document).ready(function(jQuery){$=jQuery;var stringVersionJs="";"undefined"!=typeof nbExtensionVersion&&(stringVersionJs="?v="+nbExtensionVersion);var queue=[baseNameUrl+"libraries/noboss/assets/util/js/min/cookies.min.js",baseNameUrl+"libraries/noboss/assets/util/js/min/loaders.min.js",baseNameUrl+"libraries/noboss/assets/util/js/min/blockfields.min.js","https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.js",baseNameUrl+"libraries/noboss/assets/plugins/stylesheets/css/jquery-confirm.min.css"].map(function(script){return"js"===script.slice(-2)&&0===jQuery("script[src*='"+script.slice(-30)+"']").length?jQuery("head").append('<script type="text/javascript" src="'+(-1!=script.indexOf("noboss")?script+stringVersionJs:script)+'"><\/script>'):"css"===script.slice(-3)&&0===jQuery("link[href*='"+script.slice(-30)+"']").length?jQuery("head").append('<link rel="stylesheet" href="'+(-1!=script.indexOf("noboss")?script+stringVersionJs:script)+'"/>'):void 0});jQuery.when.apply(null,queue).done(function(){var nTimer;jQuery.urlParam=function(name){return new RegExp("[?&]"+name+"=([^&#]*)").exec(window.location.href)[1]||0},nTimer=setInterval(function(){void 0!=jQuery().confirm&&(clearInterval(nTimer),nobosslicense.CONSTRUCTOR())},50)})});var nobosslicense={CONSTRUCTOR:function(){nobosslicense.licenseInfo=Joomla.getOptions("nobosslicense"),nobosslicense.active=1,jconfirm.defaults={draggable:!1,useBootstrap:!0,animateFromElement:!1,columnClass:"modal-confirm-responsive"},void 0!==nobosslicense.licenseInfo&&"INACTIVE_LICENSE"===nobosslicense.licenseInfo.data?(nobosslicense.alertErrorModal(Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_UNPUBLISHED_LICENSE_TITLE"),Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_UNPUBLISHED_LICENSE_DESC"),!1),nobosslicense.active=0,nobosslicense.blocks()):void 0===nobosslicense.licenseInfo||"TOKEN_OR_PLAN_NOT_FOUND"!==nobosslicense.licenseInfo.data&&"INVALID_TOKEN"!==nobosslicense.licenseInfo.data?void 0!==nobosslicense.licenseInfo&&"CONNECTION_ERROR"===nobosslicense.licenseInfo.data?(nobosslicense.displayLicenseNoticesTop(),nobosslicense.blocks()):void 0==nobosslicense.licenseInfo||void 0===nobosslicense.licenseInfo.data||"object"!=typeof nobosslicense.licenseInfo.data?nobosslicense.blocks():(nobosslicense.licenseInfo.flags.license_has_errors&&!nobosslicense.licenseInfo.flags.has_parent_license&&nobosslicense.displayLicenseNoticesTop(),jQuery("[data-id=license-alert-message]").on("click",'[data-id="btn-change-url"]',nobosslicense.changeAuthorizedUrl),jQuery('[data-id="plan-upgrade"]').on("click",'[data-id="btn-plan-upgrade"]',nobosslicense.upgradeLicensePlan),jQuery(document).on("click",'[data-id="btn-plan-upgrade-buy"]',nobosslicense.openPlanstableModal),jQuery(document).on("click",'[data-id="btn-renew-license"]',nobosslicense.openPlanstableModal),jQuery(document).on("click",'[data-id="btn-buy"]',nobosslicense.openPlanstableModal),jQuery(document).on("click",'[data-id="btn-reinstall"]',nobosslicense.reinstallExtension),window.addEventListener("message",nobosslicense.filterIframeMessage,!1),nobosslicense.licenseInfo.flags.modal_display_notice_license&&nobosslicense.displayModalNoticeLicense(),void 0!=nobosslicense.licenseInfo.data&&void 0!=nobosslicense.licenseInfo.data.notices_header&&!1!==nobosslicense.licenseInfo.data.notices_header&&jQuery.each(nobosslicense.licenseInfo.data.notices_header,function(key,value){void 0!=value.class&&""!=value.class||(value.class="");var msg='<div data-id="license-alert-message" class="feedback-notice '+value.class+'" style="margin-top:-5px;">';void 0!=value.icon&&""!==value.icon&&(msg+='<span class="feedback-notice__icon fa '+value.icon+'"></span>'),msg+='<div class="feedback-notice__content">',void 0!=value.title&&""!==value.title&&(msg+='<h4 class="feedback-notice__title">'+value.title+"</h4>"),msg+='<p class="feedback-notice__message" data-id="license-alert-message-text">'+value.message+"</p></div></div>",jQuery("#system-message-container").before(msg)}),void 0!=nobosslicense.licenseInfo.data&&nobosslicense.licenseInfo.flags.modal_display_messages&&!1!==nobosslicense.licenseInfo.data.messages&&jQuery.each(nobosslicense.licenseInfo.data.messages,function(key,value){jQuery.alert({title:value.title,content:value.message})})):(nobosslicense.alertErrorModal(Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INVALID_TOKEN_TITLE"),Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INVALID_TOKEN_DESC")),nobosslicense.blocks())},blocks:function(){jQuery("body").off("click","[data-id=noboss-modal]"),jQuery("#toolbar-apply, #save-group-children-save, #toolbar-save, #toolbar-save-new, .dropdown-save-group").remove(),jQuery(".subform-layout").remove()},reinstallExtension:function(){jQuery.confirm({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_REINSTALL_CONFIRM_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_REINSTALL_CONFIRM_CONTENT"),type:"blue",buttons:{cancel:{keys:["esc"],text:Joomla.JText._("NOBOSS_EXTENSIONS_GLOBAL_BT_CANCEL")},confirm:{text:Joomla.JText._("NOBOSS_EXTENSIONS_GLOBAL_BT_UPDATE"),btnClass:"btn-blue",keys:["enter"],action:function(){jQuery.ajax({url:baseNameUrl+"index.php?option=com_nobossajax&library=noboss.forms.fields.nobosslicense.nobosslicense&method=reinstallExtension&format=raw",type:"POST",timeout:3e4,data:{url_install:Joomla.JText._("NOBOSS_EXTENSIONS_URL_SITE")+"/update/"+nobosslicense.licenseInfo.data.repository_folder+"/index.php?token="+nobosslicense.licenseInfo.data.token},beforeSend:function(){util.addLoader()}}).done(function(response){jQuery.alert({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_REINSTALL_MODAL_SUCCESS_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_REINSTALL_MODAL_SUCCESS_CONTENT"),type:"blue",buttons:{ok:{keys:["enter"],action:function(){setTimeout(function(){location.reload()},500)}}}})}).fail(function(){jQuery.alert({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INITIAL_CONNECTION_ERROR_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INITIAL_CONNECTION_ERROR_DESC"),type:"red",buttons:{ok:{keys:["enter"]}}})}).always(function(){setTimeout(function(){util.removeLoader()},400)})}}}})},alertErrorModal:function(title,content,hideTab){jQuery.alert({title:title,content:content,type:"red",buttons:{ok:{keys:["enter"]}}})},displayLicenseNoticesTop:function(){var urlOption=jQuery.urlParam("option"),msgText="",linkText="",linkHref="#";"com_modules"===urlOption?(msgText=Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_ALERT_HAS_ERRORS_MODULE"),linkText=Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_ALERT_HAS_ERRORS_MODULE_LINK"),jQuery("body").on("click",'[data-id="open-license-tab"]',function(e){e.preventDefault(),jQuery('[href="#attrib-license"]').trigger("click")})):/^com_noboss/.test(urlOption)?(msgText=Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_ALERT_HAS_ERRORS_COMPONENT"),linkText=Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_ALERT_HAS_ERRORS_COMPONENT_LINK"),linkHref=window.location.origin+window.location.pathname+"?option=com_config&view=component&component="+urlOption):"com_config"===urlOption&&(msgText=Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_ALERT_HAS_ERRORS_GLOBAL_COMPONENT"),linkText=Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_ALERT_HAS_ERRORS_GLOBAL_COMPONENT_LINK"),jQuery("body").on("click",'[data-id="open-license-tab"]',function(e){e.preventDefault(),jQuery('[href="#license"]').trigger("click")})),jQuery("#system-message-container").before('<div data-id="license-alert-message" class="feedback-notice feedback-notice--error" data-has-error style="margin-top:-5px;"><span class="feedback-notice__icon fa fa-ban"></span><div class="feedback-notice__content"><p class="feedback-notice__message" data-id="license-alert-message-text"> '+msgText+' <a href="'+linkHref+'" target="_blank" data-id="open-license-tab"> '+linkText+"</a></p></div></div>")},displayModalNoticeLicense:function(){var expiringOrExpired={},urlOrUpgrade={};void 0==nobosslicense.licenseInfo.data||!nobosslicense.licenseInfo.data.updates_near_to_expire||util.getCookie("expiring_license_modal")||nobosslicense.licenseInfo.flags.has_parent_license||(expiringOrExpired={title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_EXPIRING_LICENSE_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_EXPIRING_LICENSE_DESC"),type:"blue",closeIcon:"close",buttons:{close:{keys:["esc"],text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_EXPIRING_LICENSE_CLOSE")},renew:{text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_EXPIRING_LICENSE_RENEW"),keys:["enter"],btnClass:"btn-blue",action:function(){nobosslicense.openPlanstableModal()}}}},util.setCookie("expiring_license_modal",!0,parseInt(nobosslicense.licenseInfo.data.days_to_expire_support_updates)-1)),void 0==nobosslicense.licenseInfo.data||nobosslicense.licenseInfo.data.isAuthorizedUrl||util.getCookie("unauthorized_url")||(urlOrUpgrade={title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_UNAUTHORIZED_URL_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_UNAUTHORIZED_URL_DESC"),type:"red",closeIcon:"keepLicenseUrl",buttons:{keepLicenseUrl:{keys:["esc"],text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_UNAUTHORIZED_URL_BUTTON_KEEP_URL")},updateLicenseUrl:{text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_UNAUTHORIZED_URL_BUTTON_UPDATE_URL"),keys:["enter"],btnClass:"btn-blue",action:function(){nobosslicense.changeAuthorizedUrlAction()}}}},util.setCookie("unauthorized_url",!0,1));var obj1={title:"Error",type:"blue"};jQuery.isEmptyObject(expiringOrExpired)||jQuery.confirm(jQuery.extend(obj1,expiringOrExpired)),jQuery.isEmptyObject(urlOrUpgrade)||jQuery.confirm(jQuery.extend(obj1,urlOrUpgrade))},changeAuthorizedUrl:function(event){event.preventDefault(),nobosslicense.changeAuthorizedUrlAction()},changeAuthorizedUrlAction:function(){jQuery.confirm({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_CHANGE_LICENSE_URL_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_CHANGE_LICENSE_URL_DESC"),type:"blue",closeIcon:"cancel",escapeKey:"cancel",buttons:{cancel:{keys:["esc"],text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_CHANGE_LICENSE_URL_BUTTON_CANCEL")},confirm:{text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_CHANGE_LICENSE_URL_BUTTON_CONFIRM"),btnClass:"btn-blue",keys:["enter"],action:function(){jQuery.ajax({url:Joomla.JText._("NOBOSS_EXTENSIONS_URL_SITE")+"/index.php?option=com_nbextensoes&task=externallicenses.changeAuthorizedUrl&format=raw",type:"POST",timeout:3e4,data:{token:nobosslicense.licenseInfo.data.token,newUrl:nobosslicense.licenseInfo.data.siteUrl},beforeSend:function(){util.addLoader()}}).done(function(response){if("true"==response){jQuery('[data-id="license-alert-message"]').remove();jQuery.alert({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_CHANGE_LICENSE_URL_UPDATE_SUCESS_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_CHANGE_LICENSE_URL_UPDATE_SUCESS_DESC"),type:"blue"})}else jQuery.alert({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_CHANGE_LICENSE_URL_UPDATE_ERROR_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_CHANGE_LICENSE_URL_UPDATE_ERROR_DESC"),type:"red"});setTimeout(function(){util.removeLoader()},400)})}}}})},upgradeLicensePlan:function(event){1==nobosslicense.licenseInfo.data.has_upgrade&&(event.preventDefault(),nobosslicense.upgradeLicensePlanAction())},openPlanstableModal:function(e){if(void 0==nobosslicense.licenseInfo.data.extension_type||"system"!=nobosslicense.licenseInfo.data.extension_type){var processType="renew";void 0!=e&&(e.preventDefault(),"btn-plan-upgrade-buy"===jQuery(this).data("id")?processType="upgrade":"btn-buy"===jQuery(this).data("id")&&(processType="buy"));var token=nobosslicense.licenseInfo.data.token,iframeUrl=Joomla.JText._("NOBOSS_EXTENSIONS_URL_SITE")+"/buy-process/planstable?token="+token+"&processtype="+processType;$currentScrollPos=jQuery(window).scrollTop(),jQuery("body").css("top",-$currentScrollPos);var modalElement=jQuery("<div>").addClass("buy-process-modal").hide().fadeIn("normal"),modalShadowElement=jQuery("<div>").addClass("modal-shadow").hide().fadeIn("normal"),modalCloseButton=jQuery("<span>").addClass("btn-close fa fa-times"),iframeElement=jQuery("<iframe>").attr("src",iframeUrl).attr("scrolling","yes").addClass("buy-process-iframe");modalShadowElement.appendTo("body"),modalCloseButton.appendTo(modalElement),iframeElement.appendTo(modalElement),modalElement.appendTo("body"),jQuery("body").toggleClass("inactive"),nobosslicense.addCloseListener()}else window.open(Joomla.JText._("NOBOSS_EXTENSIONS_URL_SITE")+"/customer-area/my-requests","_blank")},closePlanstableModal:function(){var modalElement=jQuery(".buy-process-modal");jQuery(".modal-shadow").fadeOut(300,function(){jQuery(this).remove()}),modalElement.fadeOut(250,function(){jQuery(this).remove()}),document.cookie="modalPlanId=; expires="+new Date+"; path= /",jQuery("body").toggleClass("inactive"),jQuery("body").css("top","")},addCloseListener:function(){jQuery(".btn-close").on("click",function(e){nobosslicense.closePlanstableModal()})},upgradeLicensePlanAction:function(){jQuery.confirm({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_UPGRADE_CONFIRM_ACTION_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_UPGRADE_CONFIRM_ACTION_DESC"),type:"blue",closeIcon:"cancel",escapeKey:"cancel",buttons:{cancel:{keys:["esc"],text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_UPGRADE_CONFIRM_ACTION_BUTTON_CANCEL")},confirm:{text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_UPGRADE_CONFIRM_ACTION_BUTTON_CONFIRM"),btnClass:"btn-blue",keys:["enter"],action:function(){jQuery.ajax({url:baseNameUrl+"index.php?option=com_nobossajax&library=noboss.forms.fields.nobosslicense.nobosslicense&method=upgradeLicensePlan&format=raw",type:"POST",timeout:3e4,data:{token:nobosslicense.licenseInfo.data.token,plan:nobosslicense.licenseInfo.data.id_local_plan},beforeSend:function(){util.addLoader()}}).done(function(response){response=JSON.parse(response),jQuery.alert({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_UPGRADE_PLAN_TITLE"),content:response.message,type:1==response.success?"blue":"red",buttons:{ok:{keys:["enter"],action:function(){setTimeout(function(){location.reload()},500)}}}})}).fail(function(){jQuery.alert({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INITIAL_CONNECTION_ERROR_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INITIAL_CONNECTION_ERROR_DESC"),type:"red",buttons:{ok:{keys:["enter"]}}})}).always(function(){setTimeout(function(){util.removeLoader()},400)})}}}})},filterIframeMessage:function(e){var data=e.data;void 0!==e.data&&("refresh"==e.data.msgType?nobosslicense.warnAndRefreshPage(data):"installNewExtensions"==e.data.msgType&&nobosslicense.installNewExtensions(data))},warnAndRefreshPage:function(data){jQuery.alert({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_PAGE_REFRESH_ALERT_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_PAGE_REFRESH_ALERT_DESC"),buttons:{ok:{keys:["enter"],action:function(){setTimeout(function(){location.reload()},500)}}}})},installNewExtensions:function(data){"string"!=typeof data&&void 0!=data.new_extensions&&0!=data.new_extensions.length&&jQuery.confirm({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INSTALL_NEW_CONFIRM_ACTION_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INSTALL_NEW_CONFIRM_ACTION_DESC"),type:"blue",buttons:{confirm:{text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INSTALL_NEW_CONFIRM_ACTION_BUTTON_CONFIRM"),btnClass:"btn-blue",keys:["enter"],action:function(){jQuery(".btn-close").trigger("click"),jQuery.ajax({url:baseNameUrl+"index.php?option=com_nobossajax&library=noboss.forms.fields.nobosslicense.nobosslicense&method=installNewExtension&format=raw",type:"POST",timeout:3e4,data:{newExtUrl:data.new_extensions},beforeSend:function(){util.addLoader()}}).done(function(response){response=JSON.parse(response),jQuery.alert({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INSTALL_NEW_CONFIRM_ACTION_TITLE"),content:response.message,type:1==response.success?"blue":"red",buttons:{ok:{keys:["enter"],action:function(){setTimeout(function(){location.reload()},500)}}}})}).fail(function(){jQuery.alert({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INITIAL_CONNECTION_ERROR_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INITIAL_CONNECTION_ERROR_DESC"),type:"red",buttons:{ok:{keys:["enter"]}}})}).always(function(){setTimeout(function(){util.removeLoader()},400)})}}}})}};