if(!util)var util={};util.activateClockpicker=function(container){container.find("[data-id-clockpicker]").each(function(){jQuery(this).clockpicker()})},util.activateEditor=function(container){window.nobosseditor&&(nobosseditor.addCssFileEditor(),container.find(".nb-editor .toggle-editor").each(function(){jQuery(this).find("a").attr("onClick","tinyMCE.execCommand('mceToggleEditor', false, '"+jQuery(this).parent().find("textarea").attr("id")+"'); return false")}))},util.activateRange=function(container){"undefined"!=typeof nobossrange&&nobossrange.activateFieldsEvents(container)},util.activateFontList=function(container){"undefined"!=typeof nobossfontlist&&nobossfontlist.actions(container)},util.activateMedia=function(container){void 0!==majorVersionJoomla&&"3"==majorVersionJoomla&&(window.SqueezeBox&&window.SqueezeBox.assign&&SqueezeBox.assign(container.find("a.modal").get(),{parse:"rel"}),window.jModalClose=function(){SqueezeBox.close()}),void 0!==majorVersionJoomla&&"4"==majorVersionJoomla&&container.find(".field-media-wrapper").each(function(){var urlField=baseNameUrl+"administrator/index.php?option=com_media&amp;view="+jQuery(this).attr("url").split("view=")[1].replace("com_nobossajax","XX");jQuery(this).attr("url",urlField),jQuery(this).find(".joomla-modal").attr("data-url",urlField),jQuery(this).find(".joomla-modal").attr("data-iframe",jQuery(this).find(".joomla-modal").attr("data-iframe").replace(/src=(.+)name=/,'src="'+urlField+'" name='))})},util.activateMinicolors=function(container,lowerJVersion){container.find("input.minicolors").each(function(){jQuery(this).minicolors({control:jQuery(this).attr("data-control")||"hue",format:"color"===jQuery(this).attr("data-validate")?"hex":("rgba"===jQuery(this).attr("data-format")?"rgb":jQuery(this).attr("data-format"))||"hex",keywords:jQuery(this).attr("data-keywords")||"",opacity:"rgba"===jQuery(this).attr("data-format"),position:jQuery(this).attr("data-position")||"default",theme:"bootstrap"}),lowerJVersion&&jQuery(this).minicolors("value",jQuery(this).val().replace("#",""))})},util.activateSelect=function(container){void 0!==majorVersionJoomla&&"3"==majorVersionJoomla&&jQuery("body").hasClass("admin")&&(container.find("form select").chosen({disable_search_threshold:10}),container.find("form select[multiple=multiple]").chosen().change(function(){jQuery(this).chosen("destroy"),jQuery(this).chosen("liszt:updated")}))},util.activateMultipleInputs=function(container){container.find(".nobossmultipleinputs__input").length>0&&nobossMultipleInputs.activateFieldsEvents(container)},util.activateYesno=function(container){void 0!==majorVersionJoomla&&"3"==majorVersionJoomla&&(container.find(".radio.btn-group label").addClass("btn"),container.find("fieldset.btn-group").each(function(){jQuery(this).prop("disabled")&&(jQuery(this).css("pointer-events","none").off("click"),jQuery(this).find(".btn").addClass("disabled"))}),container.find(".btn-group label:not(.active)").click(function(){var label=jQuery(this),input=jQuery("#"+label.attr("for"));input.prop("checked")||(label.closest(".btn-group").find("label").removeClass("active btn-success btn-danger btn-primary"),""===input.val()?label.addClass("active btn-primary"):"0"===input.val()?label.addClass("active btn-danger"):label.addClass("active btn-success"),input.prop("checked",!0),input.trigger("change"))}),container.find('.btn-group input[checked="checked"]').each(function(){var input=jQuery(this);""===input.val()?input.parent().find('label[for="'+input.attr("id")+'"]').addClass("active btn-primary"):"0"===input.val()?input.parent().find('label[for="'+input.attr("id")+'"]').addClass("active btn-danger"):input.parent().find('label[for="'+input.attr("id")+'"]').addClass("active btn-success")}))},util.activateCalendars=function(container){if(void 0!==majorVersionJoomla&&"3"==majorVersionJoomla){var DOMContentLoaded_event=document.createEvent("Event");DOMContentLoaded_event.initEvent("DOMContentLoaded",!0,!0),window.document.dispatchEvent(DOMContentLoaded_event)}},util.activatePopover=function(container){jQuery.fn.popover&&container.find(".hasPopover").popover({trigger:"hover focus"})},util.fixScriptsSubformAndTheme=function(container){util.activatePopover(container),util.activateEditor(container),util.activateRange(container),util.activateFontList(container),util.activateYesno(container)},util.subformRowAddListener=function(){var activated=!0;activated&&(util.subformRowAddListener.actions=function(row){var prefixTarget="data-target";void 0!==majorVersionJoomla&&"4"==majorVersionJoomla&&(prefixTarget="data-bs-target"),jQuery(document).contents().find("["+prefixTarget+"*='functions-modal-subform']").remove(),util.activateModalModule(jQuery(row)),util.activateModalArticle(jQuery(row)),util.activateModalMenu(jQuery(row)),util.activateClockpicker(jQuery(row)),util.activateSelect(jQuery(row)),util.fixScriptsSubformAndTheme(jQuery(row))},void 0!==majorVersionJoomla&&"4"!=majorVersionJoomla?jQuery(document).on("subform-row-add",function(event,row){util.subformRowAddListener.actions(row)}):document.addEventListener("joomla:updated",function(_ref){var row=_ref.target;util.subformRowAddListener.actions(row)}),activated=!1)},util.activateModalModule=function(container){container.find(".nb-module-btn-edit").each(function(){var fieldIdModule=jQuery(this).parent().find("select").attr("id"),modalIdModule="modal_"+fieldIdModule;jQuery(this).closest(".control-group").prev().find(".joomla-modal, .modal").attr("id",modalIdModule),jQuery(this).attr("id",fieldIdModule+"_edit"),jQuery(this).attr("data-bs-target","#"+fieldIdModule),jQuery(document).on("change","#"+fieldIdModule,function(e){""!=jQuery(this).val()?jQuery("#"+fieldIdModule+"_edit").removeAttr("disabled"):jQuery("#"+fieldIdModule+"_edit").attr("disabled",!0)}),""!==jQuery("#"+fieldIdModule).val()&&jQuery("#"+fieldIdModule).trigger("change"),jQuery(document).on("click","#"+fieldIdModule+"_edit",function(e){var moduleId=jQuery("#"+fieldIdModule).val(),moduleEditModalUrl=baseNameUrl+"administrator/index.php?option=com_modules&view=module&task=module.edit&layout=modal&tmpl=component&id="+moduleId;jQuery("#modal_"+fieldIdModule).find("iframe").remove(),jQuery("#modal_"+fieldIdModule).find(".modal-body").prepend('<iframe class="iframe jviewport-height70" src="'+moduleEditModalUrl+'" name="Editar mÃ³dulo" height="400px" width="800px"></iframe>'),jQuery("#"+modalIdModule).find(".modal-footer button.btn-secondary").attr("onClick","jQuery('#"+modalIdModule+" iframe').contents().find('#closeBtn').click()"),jQuery("#"+modalIdModule).find(".modal-footer button.btn-primary").attr("onClick","jQuery('#"+modalIdModule+" iframe').contents().find('#saveBtn').click()"),jQuery("#"+modalIdModule).find(".modal-footer button.btn-success").attr("onClick","jQuery('#"+modalIdModule+" iframe').contents().find('#applyBtn').click()"),void 0!==majorVersionJoomla&&"3"==majorVersionJoomla&&(jQuery("#"+modalIdModule).addClass("in").css({display:"block"}),jQuery("#"+modalIdModule).modal()),void 0!==majorVersionJoomla&&"4"==majorVersionJoomla&&jQuery("#"+modalIdModule).addClass("show").css({"padding-right":"17px",display:"block"}),jQuery("#"+modalIdModule).on("click",".modal-footer button.btn-secondary, .modal-footer button.btn-primary",function(e){jQuery(".modal-backdrop").remove(),jQuery("body").removeClass("modal-open"),jQuery("#"+modalIdModule).removeClass("show").css("display","none"),jQuery("#"+fieldIdModule).on("click",function(e){jQuery("#"+fieldIdModule).show()})})})})},util.genericActionsModal=function(type,fieldObj,modalFieldId,urlModalEdit,urlModalNew,urlModalSelect){switch(type){case"article":typeHtml="Article";break;case"menu":typeHtml="Item";break;default:return}jQuery(fieldObj).closest(".control-group").find("label").attr("id",modalFieldId+"_id-lbl").attr("for",modalFieldId+"_id"),jQuery(fieldObj).closest(".controls").find('input[type="text"]').attr("id",modalFieldId+"_name"),jQuery(fieldObj).closest(".controls").find("#"+modalFieldId).attr("id",modalFieldId+"_id");var prefixTarget="data-target";void 0!==majorVersionJoomla&&"4"==majorVersionJoomla&&(prefixTarget="data-bs-target");var btnSelect=jQuery(fieldObj).attr("id",modalFieldId+"_name").attr("id",modalFieldId+"_select").attr(prefixTarget,"#ModalSelect"+typeHtml+"_"+modalFieldId),btnNewModal=jQuery(fieldObj).closest(".controls").find("["+prefixTarget+"*='ModalNew"+typeHtml+"']").attr("id",modalFieldId+"_new").attr(prefixTarget,"#ModalNew"+typeHtml+"_"+modalFieldId),btnEditModal=jQuery(fieldObj).closest(".controls").find("["+prefixTarget+"*='ModalEdit"+typeHtml+"']").attr("id",modalFieldId+"_edit").attr(prefixTarget,"#ModalEdit"+typeHtml+"_"+modalFieldId),btnClearModal=jQuery(fieldObj).closest(".controls").find("[id*='_clear']").attr("id",modalFieldId+"_clear").attr("onClick","window.processModalParent('"+modalFieldId+"'); return false;");jQuery(fieldObj).closest(".controls").find("[id*='ModalSelect"+typeHtml+"']").attr("id","ModalSelect"+typeHtml+"_"+modalFieldId),jQuery(fieldObj).closest(".controls").find("[id*='ModalNew"+typeHtml+"']").attr("id","ModalNew"+typeHtml+"_"+modalFieldId),jQuery(fieldObj).closest(".controls").find("[id*='ModalEdit"+typeHtml+"']").attr("id","ModalEdit"+typeHtml+"_"+modalFieldId),jQuery(fieldObj).closest(".controls").find(".modal-footer").find("[onClick*='cancel']").attr("onClick","window.processModalEdit(this, '"+modalFieldId+"', 'add', '"+typeHtml.toLowerCase()+"', 'cancel', 'item-form'); return false;"),jQuery(fieldObj).closest(".controls").find(".modal-footer").find("[onClick*='save']").attr("onClick","window.processModalEdit(this, '"+modalFieldId+"', 'add', '"+typeHtml.toLowerCase()+"', 'save', 'item-form'); return false;"),jQuery(fieldObj).closest(".controls").find(".modal-footer").find("[onClick*='apply']").attr("onClick","window.processModalEdit(this, '"+modalFieldId+"', 'add', '"+typeHtml.toLowerCase()+"', 'apply', 'item-form'); return false;");var nameFunctionModal="jSelect"+typeHtml+"_"+modalFieldId;"menu"==type&&(nameFunctionModal="jSelectMenu_"+modalFieldId),jQuery(document).contents().find("head").append("<script data-id='functions-modal-subform'> function "+nameFunctionModal+"(id, title, catid, object, url, language) { window.processModalSelect('"+typeHtml+"', '"+modalFieldId+"', id, title, catid, object, url, language); } <\/script>"),util.adjustModalIframe("ModalSelect"+typeHtml+"_"+modalFieldId,modalFieldId,urlModalSelect),util.adjustModalIframe("ModalNew"+typeHtml+"_"+modalFieldId,modalFieldId,urlModalNew),util.adjustModalIframe("ModalEdit"+typeHtml+"_"+modalFieldId,modalFieldId,urlModalEdit),jQuery(document).ready(function($){setTimeout(function(){""!=jQuery("#"+modalFieldId+"_id").val()&&jQuery(btnEditModal).hasClass("hidden")&&(jQuery(btnSelect).addClass("hidden"),jQuery(btnNewModal).addClass("hidden"),jQuery(btnEditModal).removeClass("hidden"),jQuery(btnClearModal).removeClass("hidden"),jQuery("#"+modalFieldId+"_name").val(typeHtml+" ID "+jQuery("#"+modalFieldId+"_id").val()))},500)})},util.adjustModalIframe=function(idModal,modalFieldId,modalSrc){jQuery(document).ready(function($){void 0!==majorVersionJoomla&&"3"==majorVersionJoomla?$("#"+idModal).on("shown.bs.modal",function(){var srcIframe=modalSrc;idModal.match(/ModalEdit/)&&(srcIframe=modalSrc+jQuery("#"+modalFieldId+"_id").val()),jQuery(this).find(".modal-body").find("iframe").remove(),jQuery(this).find(".modal-body").prepend('<iframe class="iframe jviewport-height70" src="'+srcIframe+'" height="400px" width="800px"></iframe>')}):jQuery(document).on("click",'[data-bs-target="#'+idModal+'"]',function(e){Joomla.Modal.setCurrent(document.getElementById(idModal)),document.getElementById(idModal).close=function(){return $(document.getElementById(idModal)).modal("hide")};var srcIframe=modalSrc;idModal.match(/ModalEdit/)&&(srcIframe=modalSrc+jQuery("#"+modalFieldId+"_id").val()),jQuery(this).closest(".controls").find(".modal-body").find("iframe").remove(),jQuery(this).closest(".controls").find(".modal-body").prepend('<iframe class="iframe jviewport-height70" src="'+srcIframe+'" height="400px" width="800px"></iframe>')})})},util.activateModalArticle=function(container){container.find("[data-target*='ModalSelectArticle'], [data-bs-target*='ModalSelectArticle']").each(function(){var modalFieldId=jQuery(this).parent().parent().find("input[type='hidden']").attr("id"),urlModalEdit=baseNameUrl+"administrator/index.php?option=com_content&view=article&layout=modal&tmpl=component&57590de4f8b37151f8815f5bdff139b4=1&task=article.edit&id=",urlModalNew=baseNameUrl+"administrator/index.php?option=com_content&view=article&layout=modal&tmpl=component&57590de4f8b37151f8815f5bdff139b4=1&task=article.add",urlModalSelect=baseNameUrl+"administrator/index.php?option=com_content&view=articles&layout=modal&tmpl=component&57590de4f8b37151f8815f5bdff139b4=1&function=jSelectArticle_"+modalFieldId;util.genericActionsModal("article",this,modalFieldId,urlModalEdit,urlModalNew,urlModalSelect)})},util.activateModalMenu=function(container){container.find("[data-target*='ModalSelectItem'], [data-bs-target*='ModalSelectItem']").each(function(){var modalFieldId=jQuery(this).parent().parent().find("input[type='hidden']").attr("id"),urlModalEdit=baseNameUrl+"administrator/index.php?option=com_menus&view=item&layout=modal&client_id=0&tmpl=component&0936722486b34d6072bcc00621a37810=1&task=item.edit&id=",urlModalNew=baseNameUrl+"administrator/index.php?option=com_menus&view=item&layout=modal&client_id=0&tmpl=component&0936722486b34d6072bcc00621a37810=1&task=item.add",urlModalSelect=baseNameUrl+"administrator/index.php?option=com_menus&view=items&layout=modal&client_id=0&tmpl=component&0936722486b34d6072bcc00621a37810=1&function=jSelectMenu_"+modalFieldId;util.genericActionsModal("menu",this,modalFieldId,urlModalEdit,urlModalNew,urlModalSelect)})};